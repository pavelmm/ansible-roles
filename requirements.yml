---
  - src: git@github.com:netology-code/mnt-homeworks-ansible.git
    scm: git
    version: "2.1.4"
    name: elastic
  - src: git@github.com:run0ut/kibana-role.git
    scm: git
    version: "1.1.0"
    name: kibana
  - src: git@github.com:run0ut/filebeat-role.git
    scm: git
    version: "1.1.0"
    name: filebeat
    
 
- name: Get IPs
  hosts: all
  pre_tasks:
    - name: Hosts IP adreses
      ansible.builtin.setup:
        filter:
          - default_ipv4
      tags: always

- name: Install Elasticsearch
  hosts: elasticsearch
  roles:
    - elastic
  tags: elastic

- name: Install Kibana
  hosts: kibana
  roles:
    - kibana
  tags: kibana

- name: Install Filebeat
  hosts: filebeat
  roles:
    - filebeat
  tags: filebeat
